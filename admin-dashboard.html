<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CPD Request - Admin Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body class="min-h-screen bg-cover bg-center bg-fixed" style="background-image: url('background.jpg')">
    <div class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50">
        <div class="flex flex-col md:flex-row">
            <nav class="bg-white p-4 md:h-screen md:w-64 md:fixed">
                <div class="mb-8">
                    <h1 class="text-2xl font-bold text-gray-800">CPD Request</h1>
                    <p class="text-gray-600">Admin Dashboard</p>
                </div>

                <div class="space-y-2">
                    <button
                        id="overviewTab"
                        class="w-full rounded-lg bg-[#357AFF] p-3 text-left text-white"
                    >
                        <i class="fas fa-chart-line mr-2"></i> Overview
                    </button>
                    <button
                        id="usersTab"
                        class="w-full rounded-lg p-3 text-left text-gray-700 hover:bg-gray-100"
                    >
                        <i class="fas fa-users mr-2"></i> Users
                    </button>
                    <button
                        id="tasksTab"
                        class="w-full rounded-lg p-3 text-left text-gray-700 hover:bg-gray-100"
                    >
                        <i class="fas fa-tasks mr-2"></i> Tasks
                    </button>
                    <button
                        id="financesTab"
                        class="w-full rounded-lg p-3 text-left text-gray-700 hover:bg-gray-100"
                    >
                        <i class="fas fa-money-bill-wave mr-2"></i> Finances
                    </button>
                    <button
                        id="notificationsTab"
                        class="w-full rounded-lg p-3 text-left text-gray-700 hover:bg-gray-100"
                    >
                        <i class="fas fa-bell mr-2"></i> Notifications
                    </button>
                    <button
                        id="settingsTab"
                        class="w-full rounded-lg p-3 text-left text-gray-700 hover:bg-gray-100"
                    >
                        <i class="fas fa-cog mr-2"></i> Settings
                    </button>
                </div>

                <div class="mt-auto pt-8">
                    <a
                        href="/account/logout"
                        class="flex items-center text-gray-700 hover:text-[#357AFF]"
                    >
                        <i class="fas fa-sign-out-alt mr-2"></i> Sign Out
                    </a>
                </div>
            </nav>

            <main class="flex-1 p-4 md:ml-64">
                <div class="mb-6">
                    <h2 id="activeTabTitle" class="text-2xl font-bold text-gray-800">
                        Overview
                    </h2>
                </div>

                <div id="overviewContent">
                    <div class="space-y-6">
                        <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-4">
                            <div class="rounded-xl bg-white p-6 shadow-lg">
                                <h3 class="mb-4 text-lg font-semibold text-gray-800">
                                    Total Clients
                                </h3>
                                <p class="text-3xl font-bold text-[#357AFF]">
                                    0
                                </p>
                            </div>
                            <div class="rounded-xl bg-white p-6 shadow-lg">
                                <h3 class="mb-4 text-lg font-semibold text-gray-800">
                                    Job Seekers
                                </h3>
                                <p class="text-3xl font-bold text-[#357AFF]">
                                    0
                                </p>
                            </div>
                            <div class="rounded-xl bg-white p-6 shadow-lg">
                                <h3 class="mb-4 text-lg font-semibold text-gray-800">
                                    Active Tasks
                                </h3>
                                <p class="text-3xl font-bold text-[#357AFF]">
                                    0
                                </p>
                            </div>
                            <div class="rounded-xl bg-white p-6 shadow-lg">
                                <h3 class="mb-4 text-lg font-semibold text-gray-800">
                                    Total Revenue
                                </h3>
                                <p class="text-3xl font-bold text-[#357AFF]">
                                    KES 0
                                </p>
                            </div>
                        </div>

                        <div class="rounded-xl bg-white p-6 shadow-lg">
                            <h3 class="mb-4 text-xl font-semibold text-gray-800">
                                Clients by Type
                            </h3>
                            <div class="grid gap-4 md:grid-cols-3">
                                <div class="rounded-lg bg-gray-50 p-4">
                                    <h4 class="text-lg font-semibold text-gray-800">
                                        County Officers
                                    </h4>
                                    <p class="text-2xl font-bold text-[#357AFF]">
                                        0
                                    </p>
                                </div>
                                <div class="rounded-lg bg-gray-50 p-4">
                                    <h4 class="text-lg font-semibold text-gray-800">
                                        Registered Nurses
                                    </h4>
                                    <p class="text-2xl font-bold text-[#357AFF]">
                                        0
                                    </p>
                                </div>
                                <div class="rounded-lg bg-gray-50 p-4">
                                    <h4 class="text-lg font-semibold text-gray-800">
                                        Medical Officers
                                    </h4>
                                    <p class="text-2xl font-bold text-[#357AFF]">
                                        0
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="usersContent" class="hidden">
                    <div class="rounded-xl bg-white p-6 shadow-lg">
                        <div class="mb-4 flex justify-between">
                            <input
                                type="text"
                                placeholder="Search users..."
                                class="rounded-lg border border-gray-200 p-2"
                            />
                            <select class="rounded-lg border border-gray-200 p-2">
                                <option value="all">All Users</option>
                                <option value="client">Clients</option>
                                <option value="jobseeker">Job Seekers</option>
                            </select>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead>
                                    <tr class="border-b text-left">
                                        <th class="p-2">Name</th>
                                        <th class="p-2">Role</th>
                                        <th class="p-2">Status</th>
                                        <th class="p-2">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="usersTableBody">
                                    <!-- Users will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div id="tasksContent" class="hidden">
                    <div class="rounded-xl bg-white p-6 shadow-lg">
                        <div class="mb-4 flex justify-between">
                            <input
                                type="text"
                                placeholder="Search tasks..."
                                class="rounded-lg border border-gray-200 p-2"
                            />
                            <select class="rounded-lg border border-gray-200 p-2">
                                <option value="all">All Tasks</option>
                                <option value="pending">Pending</option>
                                <option value="inProgress">In Progress</option>
                                <option value="completed">Completed</option>
                            </select>
                        </div>
                        <div id="tasksList" class="space-y-4">
                            <!-- Tasks will be populated here -->
                        </div>
                    </div>
                </div>

                <div id="financesContent" class="hidden">
                    <div class="space-y-6">
                        <div class="grid gap-6 md:grid-cols-2">
                            <div class="rounded-xl bg-white p-6 shadow-lg">
                                <h3 class="mb-4 text-xl font-semibold text-gray-800">
                                    Revenue Overview
                                </h3>
                                <div id="revenueList" class="space-y-4">
                                    <!-- Payments will be populated here -->
                                </div>
                            </div>
                            <div class="rounded-xl bg-white p-6 shadow-lg">
                                <h3 class="mb-4 text-xl font-semibold text-gray-800">
                                    Pending Payouts
                                </h3>
                                <div id="payoutsList" class="space-y-4">
                                    <!-- Payouts will be populated here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="notificationsContent" class="hidden">
                    <div class="rounded-xl bg-white p-6 shadow-lg">
                        <div id="notificationsList" class="space-y-4">
                            <!-- Notifications will be populated here -->
                        </div>
                    </div>
                </div>

                <div id="settingsContent" class="hidden">
                    <div class="rounded-xl bg-white p-6 shadow-lg">
                        <form class="space-y-6">
                            <div>
                                <h3 class="mb-4 text-xl font-semibold text-gray-800">
                                    Platform Settings
                                </h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700">
                                            Platform Fee (%)
                                        </label>
                                        <input
                                            type="number"
                                            name="platformFee"
                                            class="mt-1 w-full rounded-lg border border-gray-200 p-2"
                                        />
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700">
                                            Minimum Payout Amount
                                        </label>
                                        <input
                                            type="number"
                                            name="minPayout"
                                            class="mt-1 w-full rounded-lg border border-gray-200 p-2"
                                        />
                                    </div>
                                </div>
                            </div>
                            <div>
                                <h3 class="mb-4 text-xl font-semibold text-gray-800">
                                    Notification Settings
                                </h3>
                                <div class="space-y-2">
                                    <label class="flex items-center">
                                        <input type="checkbox" class="mr-2" />
                                        Email notifications for new users
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" class="mr-2" />
                                        Email notifications for new tasks
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" class="mr-2" />
                                        Email notifications for payments
                                    </label>
                                </div>
                            </div>
                            <button
                                type="submit"
                                class="rounded-lg bg-[#357AFF] px-4 py-2 text-white hover:bg-[#2E69DE]"
                            >
                                Save Settings
                            </button>
                        </form>
                    </div>
                </div>
            </main>
        </div>

        <div id="userModal" class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4">
            <div class="w-full max-w-md rounded-xl bg-white p-6">
                <h3 class="mb-4 text-xl font-bold text-gray-800">Edit User</h3>
                <form class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700">
                            Name
                        </label>
                        <input
                            type="text"
                            name="name"
                            id="editUserName"
                            class="mt-1 w-full rounded-lg border border-gray-200 p-2"
                        />
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">
                            Email
                        </label>
                        <input
                            type="email"
                            name="email"
                            id="editUserEmail"
                            class="mt-1 w-full rounded-lg border border-gray-200 p-2"
                        />
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">
                            Status
                        </label>
                        <select
                            name="status"
                            id="editUserStatus"
                            class="mt-1 w-full rounded-lg border border-gray-200 p-2"
                        >
                            <option value="active">Active</option>
                            <option value="blocked">Blocked</option>
                        </select>
                    </div>
                    <div class="flex justify-end space-x-3">
                        <button
                            type="button"
                            id="cancelEditUser"
                            class="rounded-lg border border-gray-200 px-4 py-2 text-gray-700 hover:bg-gray-50"
                        >
                            Cancel
                        </button>
                        <button
                            type="submit"
                            class="rounded-lg bg-[#357AFF] px-4 py-2 text-white hover:bg-[#2E69DE]"
                        >
                            Save Changes
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Tab management
            const tabs = {
                overview: document.getElementById('overviewTab'),
                users: document.getElementById('usersTab'),
                tasks: document.getElementById('tasksTab'),
                finances: document.getElementById('financesTab'),
                notifications: document.getElementById('notificationsTab'),
                settings: document.getElementById('settingsTab')
            };

            const contents = {
                overview: document.getElementById('overviewContent'),
                users: document.getElementById('usersContent'),
                tasks: document.getElementById('tasksContent'),
                finances: document.getElementById('financesContent'),
                notifications: document.getElementById('notificationsContent'),
                settings: document.getElementById('settingsContent')
            };

            const activeTabTitle = document.getElementById('activeTabTitle');

            function activateTab(tabName) {
                // Reset all tabs and contents
                Object.values(tabs).forEach(tab => {
                    tab.classList.remove('bg-[#357AFF]', 'text-white');
                    tab.classList.add('text-gray-700', 'hover:bg-gray-100');
                });
                
                Object.values(contents).forEach(content => {
                    content.classList.add('hidden');
                });

                // Activate selected tab
                tabs[tabName].classList.add('bg-[#357AFF]', 'text-white');
                tabs[tabName].classList.remove('text-gray-700', 'hover:bg-gray-100');
                contents[tabName].classList.remove('hidden');
                activeTabTitle.textContent = tabName.charAt(0).toUpperCase() + tabName.slice(1);
            }

            // Add event listeners to tabs
            Object.keys(tabs).forEach(tabName => {
                tabs[tabName].addEventListener('click', () => activateTab(tabName));
            });

            // User modal management
            const userModal = document.getElementById('userModal');
            const cancelEditUser = document.getElementById('cancelEditUser');

            cancelEditUser.addEventListener('click', function() {
                userModal.classList.add('hidden');
            });

            // Sample data for demonstration
            const sampleUsers = [
                { id: 1, name: 'John Doe', email: 'john@example.com', role: 'CLIENT', status: 'active' },
                { id: 2, name: 'Jane Smith', email: 'jane@example.com', role: 'JOB_SEEKER', status: 'active' },
                { id: 3, name: 'Mike Johnson', email: 'mike@example.com', role: 'CLIENT', status: 'blocked' }
            ];

            const sampleTasks = [
                { id: 1, title: 'Complete CPD Form', description: 'Client needs help filling CPD application', status: 'pending', clientName: 'John Doe', deadline: '2023-06-15' },
                { id: 2, title: 'Review Medical Report', description: 'Review and summarize medical report', status: 'inProgress', clientName: 'Sarah Williams', deadline: '2023-06-20' }
            ];

            const samplePayments = [
                { id: 1, description: 'CPD Form Submission', amount: '5,000', date: '2023-06-01' },
                { id: 2, description: 'Report Review', amount: '3,500', date: '2023-06-05' }
            ];

            const samplePayouts = [
                { id: 1, jobSeeker: 'Jane Smith', taskTitle: 'Complete CPD Form', amount: '4,000' },
                { id: 2, jobSeeker: 'Robert Brown', taskTitle: 'Review Medical Report', amount: '2,800' }
            ];

            const sampleNotifications = [
                { id: 1, title: 'New User Registered', message: 'John Doe has registered as a client', timestamp: '2 hours ago', read: false },
                { id: 2, title: 'Task Completed', message: 'CPD Form has been submitted by Jane Smith', timestamp: '1 day ago', read: true }
            ];

            // Populate users table
            const usersTableBody = document.getElementById('usersTableBody');
            sampleUsers.forEach(user => {
                const row = document.createElement('tr');
                row.className = 'border-b';
                row.innerHTML = `
                    <td class="p-2">${user.name}</td>
                    <td class="p-2">${user.role}</td>
                    <td class="p-2">
                        <span class="rounded-full px-2 py-1 text-sm ${user.status === 'active' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">
                            ${user.status}
                        </span>
                    </td>
                    <td class="p-2">
                        <button data-user-id="${user.id}" class="edit-user mr-2 text-[#357AFF] hover:text-[#2E69DE]">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="text-red-500 hover:text-red-700">
                            <i class="fas fa-ban"></i>
                        </button>
                    </td>
                `;
                usersTableBody.appendChild(row);
            });

            // Add event listeners to edit buttons
            document.querySelectorAll('.edit-user').forEach(button => {
                button.addEventListener('click', function() {
                    const userId = parseInt(this.getAttribute('data-user-id'));
                    const user = sampleUsers.find(u => u.id === userId);
                    
                    if (user) {
                        document.getElementById('editUserName').value = user.name;
                        document.getElementById('editUserEmail').value = user.email;
                        document.getElementById('editUserStatus').value = user.status;
                        userModal.classList.remove('hidden');
                    }
                });
            });

            // Populate tasks list
            const tasksList = document.getElementById('tasksList');
            sampleTasks.forEach(task => {
                const taskElement = document.createElement('div');
                taskElement.className = 'rounded-lg border border-gray-200 p-4';
                taskElement.innerHTML = `
                    <div class="flex items-center justify-between">
                        <h3 class="text-lg font-semibold">${task.title}</h3>
                        <span class="rounded-full px-3 py-1 text-sm ${
                            task.status === 'completed' ? 'bg-green-100 text-green-800' :
                            task.status === 'inProgress' ? 'bg-blue-100 text-blue-800' :
                            'bg-yellow-100 text-yellow-800'
                        }">
                            ${task.status}
                        </span>
                    </div>
                    <p class="mt-2 text-gray-600">${task.description}</p>
                    <div class="mt-4 flex items-center justify-between">
                        <div class="text-sm text-gray-500">
                            Client: ${task.clientName} | Due: ${task.deadline}
                        </div>
                        <div>
                            <button class="mr-2 text-[#357AFF] hover:text-[#2E69DE]">
                                <i class="fas fa-user-plus"></i> Assign
                            </button>
                            <button class="text-[#357AFF] hover:text-[#2E69DE]">
                                <i class="fas fa-eye"></i> Review
                            </button>
                        </div>
                    </div>
                `;
                tasksList.appendChild(taskElement);
            });

            // Populate payments and payouts
            const revenueList = document.getElementById('revenueList');
            samplePayments.forEach(payment => {
                const paymentElement = document.createElement('div');
                paymentElement.className = 'flex items-center justify-between border-b pb-4';
                paymentElement.innerHTML = `
                    <div>
                        <p class="font-semibold">${payment.description}</p>
                        <p class="text-sm text-gray-500">${payment.date}</p>
                    </div>
                    <p class="font-bold text-[#357AFF]">
                        KES ${payment.amount}
                    </p>
                `;
                revenueList.appendChild(paymentElement);
            });

            const payoutsList = document.getElementById('payoutsList');
            samplePayouts.forEach(payout => {
                const payoutElement = document.createElement('div');
                payoutElement.className = 'flex items-center justify-between border-b pb-4';
                payoutElement.innerHTML = `
                    <div>
                        <p class="font-semibold">${payout.jobSeeker}</p>
                        <p class="text-sm text-gray-500">${payout.taskTitle}</p>
                    </div>
                    <button class="rounded-lg bg-[#357AFF] px-4 py-2 text-white hover:bg-[#2E69DE]">
                        Process
                    </button>
                `;
                payoutsList.appendChild(payoutElement);
            });

            // Populate notifications
            const notificationsList = document.getElementById('notificationsList');
            sampleNotifications.forEach(notification => {
                const notificationElement = document.createElement('div');
                notificationElement.className = 'flex items-start gap-4 border-b border-gray-100 py-4 last:border-0';
                notificationElement.innerHTML = `
                    <div class="mt-1 h-2 w-2 rounded-full ${notification.read ? 'bg-gray-300' : 'bg-[#357AFF]'}"></div>
                    <div>
                        <h4 class="font-semibold text-gray-800">${notification.title}</h4>
                        <p class="text-gray-600">${notification.message}</p>
                        <span class="text-sm text-gray-500">${notification.timestamp}</span>
                    </div>
                `;
                notificationsList.appendChild(notificationElement);
            });
        });
    </script>
</body>
</html>